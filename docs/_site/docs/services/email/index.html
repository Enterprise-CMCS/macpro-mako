<!DOCTYPE html><html lang="en-US"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=Edge"><link rel="stylesheet" href="/assets/css/just-the-docs-default.css"><link rel="stylesheet" href="/assets/css/just-the-docs-head-nav.css" id="jtd-head-nav-stylesheet"><style id="jtd-nav-activation"> .site-nav > ul.nav-list:first-child > li > a, .site-nav > ul.nav-list:first-child > li > ul > li:not(:nth-child(6)) > a, .site-nav > ul.nav-list:first-child > li > ul > li > ul > li a { background-image: none; } .site-nav > ul.nav-list:not(:first-child) a, .site-nav li.external a { background-image: none; } .site-nav > ul.nav-list:first-child > li:nth-child(5) > ul > li:nth-child(6) > a { font-weight: 600; text-decoration: none; }.site-nav > ul.nav-list:first-child > li:nth-child(5) > button svg, .site-nav > ul.nav-list:first-child > li:nth-child(5) > ul > li:nth-child(6) > button svg { transform: rotate(-90deg); }.site-nav > ul.nav-list:first-child > li.nav-list-item:nth-child(5) > ul.nav-list, .site-nav > ul.nav-list:first-child > li.nav-list-item:nth-child(5) > ul.nav-list > li.nav-list-item:nth-child(6) > ul.nav-list { display: block; }</style><script src="/assets/js/vendor/lunr.min.js"></script> <script src="/assets/js/just-the-docs.js"></script><meta name="viewport" content="width=device-width, initial-scale=1"><link rel="icon" href="/favicon.ico" type="image/x-icon"><title>email | MAKO</title><meta name="generator" content="Jekyll v4.3.4" /><meta property="og:title" content="email" /><meta property="og:locale" content="en_US" /><meta name="description" content="A new project by the CMS MACPRO platform team." /><meta property="og:description" content="A new project by the CMS MACPRO platform team." /><link rel="canonical" href="http://0.0.0.0:4000/docs/services/email/" /><meta property="og:url" content="http://0.0.0.0:4000/docs/services/email/" /><meta property="og:site_name" content="MAKO" /><meta property="og:type" content="website" /><meta name="twitter:card" content="summary" /><meta property="twitter:title" content="email" /> <script type="application/ld+json"> {"@context":"https://schema.org","@type":"WebPage","description":"A new project by the CMS MACPRO platform team.","headline":"email","url":"http://0.0.0.0:4000/docs/services/email/"}</script><body> <a class="skip-to-main" href="#main-content">Skip to main content</a> <svg xmlns="http://www.w3.org/2000/svg" class="d-none"> <symbol id="svg-link" viewBox="0 0 24 24"><title>Link</title><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-link"><path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path> </svg> </symbol> <symbol id="svg-menu" viewBox="0 0 24 24"><title>Menu</title><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-menu"><line x1="3" y1="12" x2="21" y2="12"></line><line x1="3" y1="6" x2="21" y2="6"></line><line x1="3" y1="18" x2="21" y2="18"></line> </svg> </symbol> <symbol id="svg-arrow-right" viewBox="0 0 24 24"><title>Expand</title><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-chevron-right"><polyline points="9 18 15 12 9 6"></polyline> </svg> </symbol> <symbol id="svg-external-link" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-external-link"><title id="svg-external-link-title">(external link)</title><path d="M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6"></path><polyline points="15 3 21 3 21 9"></polyline><line x1="10" y1="14" x2="21" y2="3"></line> </symbol> <symbol id="svg-doc" viewBox="0 0 24 24"><title>Document</title><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-file"><path d="M13 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V9z"></path><polyline points="13 2 13 9 20 9"></polyline> </svg> </symbol> <symbol id="svg-search" viewBox="0 0 24 24"><title>Search</title><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-search"> <circle cx="11" cy="11" r="8"></circle><line x1="21" y1="21" x2="16.65" y2="16.65"></line> </svg> </symbol> <symbol id="svg-copy" viewBox="0 0 16 16"><title>Copy</title><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-clipboard" viewBox="0 0 16 16"><path d="M4 1.5H3a2 2 0 0 0-2 2V14a2 2 0 0 0 2 2h10a2 2 0 0 0 2-2V3.5a2 2 0 0 0-2-2h-1v1h1a1 1 0 0 1 1 1V14a1 1 0 0 1-1 1H3a1 1 0 0 1-1-1V3.5a1 1 0 0 1 1-1h1v-1z"/><path d="M9.5 1a.5.5 0 0 1 .5.5v1a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5v-1a.5.5 0 0 1 .5-.5h3zm-3-1A1.5 1.5 0 0 0 5 1.5v1A1.5 1.5 0 0 0 6.5 4h3A1.5 1.5 0 0 0 11 2.5v-1A1.5 1.5 0 0 0 9.5 0h-3z"/> </svg> </symbol> <symbol id="svg-copied" viewBox="0 0 16 16"><title>Copied</title><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-clipboard-check-fill" viewBox="0 0 16 16"><path d="M6.5 0A1.5 1.5 0 0 0 5 1.5v1A1.5 1.5 0 0 0 6.5 4h3A1.5 1.5 0 0 0 11 2.5v-1A1.5 1.5 0 0 0 9.5 0h-3Zm3 1a.5.5 0 0 1 .5.5v1a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5v-1a.5.5 0 0 1 .5-.5h3Z"/><path d="M4 1.5H3a2 2 0 0 0-2 2V14a2 2 0 0 0 2 2h10a2 2 0 0 0 2-2V3.5a2 2 0 0 0-2-2h-1v1A2.5 2.5 0 0 1 9.5 5h-3A2.5 2.5 0 0 1 4 2.5v-1Zm6.854 7.354-3 3a.5.5 0 0 1-.708 0l-1.5-1.5a.5.5 0 0 1 .708-.708L7.5 10.793l2.646-2.647a.5.5 0 0 1 .708.708Z"/> </svg> </symbol> </svg><div class="side-bar"><div class="site-header" role="banner"> <a href="/" class="site-title lh-tight"> MAKO </a> <button id="menu-button" class="site-button btn-reset" aria-label="Toggle menu" aria-pressed="false"> <svg viewBox="0 0 24 24" class="icon" aria-hidden="true"><use xlink:href="#svg-menu"></use></svg> </button></div><nav aria-label="Main" id="site-nav" class="site-nav"><ul class="nav-list"><li class="nav-list-item"><a href="/" class="nav-list-link">Home</a><li class="nav-list-item"><a href="/docs/overview/" class="nav-list-link">Overview</a><li class="nav-list-item"><button class="nav-list-expander btn-reset" aria-label="toggle items in Design category" aria-pressed="false"> <svg viewBox="0 0 24 24" aria-hidden="true"><use xlink:href="#svg-arrow-right"></use></svg> </button><a href="/docs/design" class="nav-list-link">Design</a><ul class="nav-list"><li class="nav-list-item"><a href="/docs/design/authentication_and_authorization/" class="nav-list-link">Auth</a></ul><li class="nav-list-item"><button class="nav-list-expander btn-reset" aria-label="toggle items in Onboarding category" aria-pressed="false"> <svg viewBox="0 0 24 24" aria-hidden="true"><use xlink:href="#svg-arrow-right"></use></svg> </button><a href="/docs/onboarding" class="nav-list-link">Onboarding</a><ul class="nav-list"><li class="nav-list-item"><a href="/docs/onboarding/team/" class="nav-list-link">Team Introduction</a><li class="nav-list-item"><a href="/docs/onboarding/access-requests/" class="nav-list-link">Access Requests</a><li class="nav-list-item"><a href="/docs/onboarding/communication/" class="nav-list-link">Communication</a><li class="nav-list-item"><a href="/docs/onboarding/workspace-setup/" class="nav-list-link">Workspace Setup</a></ul><li class="nav-list-item"><button class="nav-list-expander btn-reset" aria-label="toggle items in Services category" aria-pressed="false"> <svg viewBox="0 0 24 24" aria-hidden="true"><use xlink:href="#svg-arrow-right"></use></svg> </button><a href="/docs/services" class="nav-list-link">Services</a><ul class="nav-list"><li class="nav-list-item"><a href="/docs/services/alerts/" class="nav-list-link">alerts</a><li class="nav-list-item"><a href="/docs/services/api/" class="nav-list-link">api</a><li class="nav-list-item"><a href="/docs/services/auth/" class="nav-list-link">auth</a><li class="nav-list-item"><a href="/docs/services/dashboard/" class="nav-list-link">dashboard</a><li class="nav-list-item"><a href="/docs/services/data/" class="nav-list-link">data</a><li class="nav-list-item"><a href="/docs/services/email/" class="nav-list-link">email</a><li class="nav-list-item"><a href="/docs/services/ui/" class="nav-list-link">ui</a><li class="nav-list-item"><a href="/docs/services/ui-infra/" class="nav-list-link">ui-infra</a></ul><li class="nav-list-item"><button class="nav-list-expander btn-reset" aria-label="toggle items in Team Norms category" aria-pressed="false"> <svg viewBox="0 0 24 24" aria-hidden="true"><use xlink:href="#svg-arrow-right"></use></svg> </button><a href="/docs/team-norms" class="nav-list-link">Team Norms</a><ul class="nav-list"><li class="nav-list-item"><a href="/docs/team-norms/pull-requests/" class="nav-list-link">Pull Requests</a><li class="nav-list-item"><a href="/docs/team-norms/code-style/" class="nav-list-link">Code Style Cheatsheet</a><li class="nav-list-item"><a href="/docs/team-norms/jira-workflow/" class="nav-list-link">JIRA Workflow</a></ul><li class="nav-list-item"><button class="nav-list-expander btn-reset" aria-label="toggle items in GitHub Workflows category" aria-pressed="false"> <svg viewBox="0 0 24 24" aria-hidden="true"><use xlink:href="#svg-arrow-right"></use></svg> </button><a href="/docs/workflows" class="nav-list-link">GitHub Workflows</a><ul class="nav-list"><li class="nav-list-item"><a href="/docs/workflows/security-hub-jira-sync/" class="nav-list-link">Security Hub Jira Sync</a><li class="nav-list-item"><a href="/docs/workflows/auto-create-jira-comment/" class="nav-list-link">Jira Issue Commenter</a><li class="nav-list-item"><a href="/docs/workflows/deploy/" class="nav-list-link">Deploy</a></ul><li class="nav-list-item"><button class="nav-list-expander btn-reset" aria-label="toggle items in Developer Guide category" aria-pressed="false"> <svg viewBox="0 0 24 24" aria-hidden="true"><use xlink:href="#svg-arrow-right"></use></svg> </button><a href="/docs/developer-guide" class="nav-list-link">Developer Guide</a><ul class="nav-list"><li class="nav-list-item"><a href="/docs/developer-guide/aws-auth/" class="nav-list-link">AWS Login</a><li class="nav-list-item"><a href="/docs/developer-guide/launch-darkly/" class="nav-list-link">Launch Darkly</a><li class="nav-list-item"><a href="/docs/developer-guide/update-diagram/" class="nav-list-link">Updating Diagram</a><li class="nav-list-item"><a href="/docs/developer-guide/deploy/" class="nav-list-link">Deploy a Stage</a><li class="nav-list-item"><a href="/docs/developer-guide/destroy/" class="nav-list-link">Destroy a Stage</a><li class="nav-list-item"><a href="/docs/developer-guide/docs/" class="nav-list-link">Run Docs Site Locally</a><li class="nav-list-item"><a href="/docs/developer-guide/subscribe-to-alerts/" class="nav-list-link">Subscribing to Alerts</a><li class="nav-list-item"><a href="/docs/developer-guide/pre-commit/" class="nav-list-link">Pre-Commit Usage</a><li class="nav-list-item"><a href="/docs/developer-guide/base-update/" class="nav-list-link">Update from Base</a><li class="nav-list-item"><a href="/docs/developer-guide/list-running-stages/" class="nav-list-link">List Running Stages</a><li class="nav-list-item"><a href="/docs/developer-guide/run-commands/" class="nav-list-link">Run Commands</a><li class="nav-list-item"><a href="/docs/developer-guide/unit-testing/" class="nav-list-link">Unit Testing</a></ul><li class="nav-list-item"><a href="/docs/developer-metrics/" class="nav-list-link">Dev (DORA) Metrics</a><li class="nav-list-item"><a href="/docs/webforms/" class="nav-list-link">Webforms</a></ul><ul class="nav-list"><li class="nav-list-item external"> <a href="https://github.com/Enterprise-CMCS/macpro-mako" class="nav-list-link external" > GitHub <svg viewBox="0 0 24 24" aria-labelledby="svg-external-link-title"><use xlink:href="#svg-external-link"></use></svg> </a><li class="nav-list-item external"> <a href="https://qmacbis.atlassian.net/jira/software/c/projects/OY2/boards/257" class="nav-list-link external" > Jira <svg viewBox="0 0 24 24" aria-labelledby="svg-external-link-title"><use xlink:href="#svg-external-link"></use></svg> </a><li class="nav-list-item external"> <a href="https://cmsgov.slack.com/archives/C05ECGY0F5F" class="nav-list-link external" > Slack <svg viewBox="0 0 24 24" aria-labelledby="svg-external-link-title"><use xlink:href="#svg-external-link"></use></svg> </a></ul></nav><footer class="site-footer"> This site uses <a href="https://github.com/just-the-docs/just-the-docs">Just the Docs</a>, a documentation theme for Jekyll.</footer></div><div class="main" id="top"><div id="main-header" class="main-header"><div class="search" role="search"><div class="search-input-wrap"> <input type="text" id="search-input" class="search-input" tabindex="0" placeholder="Search MAKO" aria-label="Search MAKO" autocomplete="off"> <label for="search-input" class="search-label"><svg viewBox="0 0 24 24" class="search-icon"><use xlink:href="#svg-search"></use></svg></label></div><div id="search-results" class="search-results"></div></div><nav aria-label="Auxiliary" class="aux-nav"><ul class="aux-nav-list"><li class="aux-nav-list-item"> <a href="https://github.com/Enterprise-CMCS/macpro-mako" class="site-button" > GitHub </a><li class="aux-nav-list-item"> <a href="https://qmacbis.atlassian.net/jira/software/c/projects/OY2/boards/257" class="site-button" > Jira </a><li class="aux-nav-list-item"> <a href="https://cmsgov.slack.com/archives/C05ECGY0F5F" class="site-button" > Slack </a></ul></nav></div><div class="main-content-wrap"><nav aria-label="Breadcrumb" class="breadcrumb-nav"><ol class="breadcrumb-nav-list"><li class="breadcrumb-nav-list-item"><a href="/docs/services">Services</a><li class="breadcrumb-nav-list-item"><span>email</span></ol></nav><div id="main-content" class="main-content"><main><h1 class="no_toc" id="email"> <a href="#email" class="anchor-heading" aria-labelledby="email"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> email</h1><h2 id="summary"> <a href="#summary" class="anchor-heading" aria-labelledby="summary"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Summary</h2><p>The email service deploys the lambdas, SNS topics, and Configuration Sets needed to send email.</p><h2 id="detail"> <a href="#detail" class="anchor-heading" aria-labelledby="detail"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Detail</h2><p>AWS SES is an account-wide service for basic sending and receiving of email. By creating lambdas to build the emails and sending the email with a branch-specific configuration set, we can follow the events of email sending and take action based on those events.</p><h3 id="secrets-manager"> <a href="#secrets-manager" class="anchor-heading" aria-labelledby="secrets-manager"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Secrets Manager</h3><p>The workflow will not successfully deploy unless the emailAddressLookup object is defined:</p><p>Named {project}/default/emailAddressLookup or {project}/{stage}/emailAddressLookup { <br /> “sourceEmail”:”"CMS MACPro no-reply" <a href="mailto:spa-reply@cms.hhs.gov">spa-reply@cms.hhs.gov</a>”, “osgEmail”:”"OSG" <a href="mailto:mako.stateuser@gmail.com">mako.stateuser@gmail.com</a>”, “chipInbox”:”"CHIP Inbox" <a href="mailto:mako.stateuser@gmail.com">mako.stateuser@gmail.com</a>”, “chipCcList”:”"CHIP CC 1" <a href="mailto:mako.stateuser@gmail.com">mako.stateuser@gmail.com</a>;"CHIP CC 2" <a href="mailto:mako.stateuser@gmail.com">mako.stateuser@gmail.com</a>”, “dpoEmail”:”"DPO Action" <a href="mailto:mako.stateuser@gmail.com">mako.stateuser@gmail.com</a>”, “dmcoEmail”:”"DMCO Action" <a href="mailto:mako.stateuser@gmail.com">mako.stateuser@gmail.com</a>”, “dhcbsooEmail”:”"DHCBSOO Action" <a href="mailto:mako.stateuser@gmail.com">mako.stateuser@gmail.com</a>” }</p><p>These values are set during deployment as environment variables on the lambda. You can edit these values in the AWS Console on the Lambda configuration tab.</p><p>LAUCH NOTE!!! The defined email addresses have been stored as om/default/emailAddressLookup in the production account, with om/production/emailAddressLookup overwriting those email addresses with the test email addresses. Delete the om/production/emailAddressLookup before the real launch deploy (you can also edit the environment variables after the lambda is built).</p><h3 id="test-accounts"> <a href="#test-accounts" class="anchor-heading" aria-labelledby="test-accounts"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Test accounts</h3><p>There are gmail accounts created to facilitate email testing. Please contact a MACPro team member for access to these inboxes. At this time, there is only one available email inbox.</p><ul><li>mako.stateuser@gmail.com - a state user account - does have an associated OneMAC login</ul><h3 id="templates"> <a href="#templates" class="anchor-heading" aria-labelledby="templates"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Templates</h3><p>The email services uses the serverless-ses-template plugin to manage the email templates being used for each stage. To edit the templates, edit index.js in ./ses-email-templates. Each template configuration object requires:</p><ul><li>name: the template name (note, the stage name is appended to this during deployment so branch templates remain unique to that stage). At this time, the naming standard for email templates is based on the event details. Specifically, the action and the authority values from the decoded event. If action is not included in the event data, “new-submission” is assumed.<li>subject: the subject line of the email, may contain replacement values using .<li>html: the email body in html, may contain replacement values using .<li>text: the email body in text, may contain replacement values using .</ul><h2 id="email-sending-service-with-aws-cdk"> <a href="#email-sending-service-with-aws-cdk" class="anchor-heading" aria-labelledby="email-sending-service-with-aws-cdk"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Email Sending Service with AWS CDK</h2><p>This guide provides an overview and implementation of a robust email sending service using AWS Cloud Development Kit (CDK). The service includes features such as dedicated IP pools, configuration sets, verified email identities, and monitoring through SNS topics.</p></main><hr><footer><p><a href="#top" id="back-to-top">Back to top</a></p><p class="text-small text-grey-dk-100 mb-0">A work of the MACPRO Platform Team for the Centers for Medicare & Medicaid Services.</p><div class="d-flex mt-2"><p class="text-small text-grey-dk-000 mb-0"> <a href="https://github.com/Enterprise-CMCS/macpro-mako/tree/main/docs/docs/services/email.md" id="edit-this-page">Edit this page on GitHub</a></p></div></footer></div></div><div class="search-overlay"></div></div>

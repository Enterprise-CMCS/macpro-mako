{
    "widgets": [
        {
            "height": 3,
            "width": 6,
            "y": 0,
            "x": 6,
            "type": "custom",
            "properties": {
                "endpoint": "arn:aws:lambda:${env:REGION_A}:${aws:accountId}:function:${self:service}-${sls:stage}-createDashboardTemplateWidget",
                "updateOn": {
                    "refresh": true,
                    "resize": true,
                    "timeRange": true
                }
            }
        },
        {
            "height": 1,
            "width": 24,
            "y": 3,
            "x": 0,
            "type": "text",
            "properties": {
                "markdown": "## cloudfront metrics",
                "background": "transparent"
            }
        },
        {
            "height": 3,
            "width": 6,
            "y": 0,
            "x": 0,
            "type": "text",
            "properties": {
                "markdown": "### Made changes, ready to export?\nUse the widget to the right to execute the templatizer lambda, which will export your current, saved dashboard into a format ready for check in.",
                "background": "transparent"
            }
        },
        {
            "height": 8,
            "width": 8,
            "y": 30,
            "x": 0,
            "type": "metric",
            "properties": {
                "metrics": [
                    [
                        "AWS/SNS",
                        "NumberOfMessagesPublished",
                        "TopicName",
                        "Alerts-base-alerts-${sls:stage}"
                    ]
                ],
                "view": "timeSeries",
                "stacked": false,
                "region": "${env:REGION_A}",
                "title": "SNS Topic",
                "period": 60,
                "stat": "Sum"
            }
        },
        {
            "height": 7,
            "width": 8,
            "y": 22,
            "x": 0,
            "type": "alarm",
            "properties": {
                "title": "Mako Dashboard ${sls:stage} Alarms",
                "alarms": [
                    "arn:aws:cloudwatch:${env:REGION_A}:${aws:accountId}:alarm:lambda-search-errors",
                    "arn:aws:cloudwatch:${env:REGION_A}:${aws:accountId}:alarm:mako-${sls:stage}-sinkOnemacErrorCount",
                    "arn:aws:cloudwatch:${env:REGION_A}:${aws:accountId}:alarm:mako-${sls:stage}-ONEMAC-validation-error",
                    "arn:aws:cloudwatch:${env:REGION_A}:${aws:accountId}:alarm:mako-${sls:stage}-SEATOOL-validation-error",
                    "arn:aws:cloudwatch:${env:REGION_A}:${aws:accountId}:alarm:mako-${sls:stage}-sinkSeatoolErrorsCount"
                ]
            }
        },
        {
            "height": 6,
            "width": 6,
            "y": 4,
            "x": 0,
            "type": "metric",
            "properties": {
                "view": "timeSeries",
                "stacked": false,
                "metrics": [
                    [
                        "AWS/CloudFront",
                        "Requests",
                        "Region",
                        "Global",
                        "DistributionId",
                        "${CloudfrontDistributionId}"
                    ],
                    [
                        ".",
                        "TotalErrorRate",
                        ".",
                        ".",
                        ".",
                        "."
                    ],
                    [
                        ".",
                        "4xxErrorRate",
                        ".",
                        ".",
                        ".",
                        "."
                    ],
                    [
                        ".",
                        "BytesDownloaded",
                        ".",
                        ".",
                        ".",
                        "."
                    ],
                    [
                        ".",
                        "BytesUploaded",
                        ".",
                        ".",
                        ".",
                        "."
                    ]
                ],
                "region": "${env:REGION_A}",
                "title": "Cloudfront Distro Metrics"
            }
        },
        {
            "height": 6,
            "width": 6,
            "y": 13,
            "x": 0,
            "type": "metric",
            "properties": {
                "view": "timeSeries",
                "stacked": false,
                "metrics": [
                    [
                        "AWS/ApiGateway",
                        "Latency",
                        "ApiName",
                        "${sls:stage}-om-api"
                    ],
                    [
                        ".",
                        "Count",
                        ".",
                        "."
                    ],
                    [
                        ".",
                        "IntegrationLatency",
                        ".",
                        "."
                    ],
                    [
                        ".",
                        "4XXError",
                        ".",
                        "."
                    ],
                    [
                        ".",
                        "5XXError",
                        ".",
                        "."
                    ]
                ],
                "region": "${env:REGION_A}",
                "title": "Api Gateway Metrics"
            }
        },
        {
            "height": 1,
            "width": 8,
            "y": 12,
            "x": 0,
            "type": "text",
            "properties": {
                "markdown": "## api gateway",
                "background": "transparent"
            }
        },
        {
            "height": 1,
            "width": 9,
            "y": 21,
            "x": 0,
            "type": "text",
            "properties": {
                "markdown": "## opensearch",
                "background": "transparent"
            }
        },
        {
            "height": 1,
            "width": 24,
            "y": 29,
            "x": 0,
            "type": "text",
            "properties": {
                "markdown": "## alerts service",
                "background": "transparent"
            }
        },
        {
            "height": 2,
            "width": 12,
            "y": 19,
            "x": 0,
            "type": "alarm",
            "properties": {
                "title": "MAKO Api Gateway Errors",
                "alarms": [
                    "arn:aws:cloudwatch:${env:REGION_A}:${aws:accountId}:alarm:mako-api-400-errors",
                    "arn:aws:cloudwatch:${env:REGION_A}:${aws:accountId}:alarm:mako-api-500-errors"
                ]
            }
        },
        {
            "type": "alarm",
            "x": 0,
            "y": 10,
            "width": 12,
            "height": 2,
            "properties": {
                "title": "Cloudfront Errors",
                "alarms": [
                    "arn:aws:cloudwatch:${env:REGION_A}:${aws:accountId}:alarm:mako-cloudfront-400-errors",
                    "arn:aws:cloudwatch:${env:REGION_A}:${aws:accountId}:alarm:mako-cloudfront-500-errors"
                ]
            }
        }
    ]
}
<!doctype html>
<html lang="en" class="h-full">
  <head>
    <meta charset="UTF-8" />
    <link rel="preload" href="/onemac-logo.png" as="image" />
    <link rel="icon" href="/favicon-light.png" type="image/png" sizes="32x32" />
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Open+Sans:wght@300;400;500;600;700&display=swap"
      rel="stylesheet"
    />
    <link
      href="https://fonts.googleapis.com/css2?family=Merriweather:wght@700&display=swap"
      rel="stylesheet"
    />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>OneMAC</title>
  </head>

  <body class="h-full">
    <div id="root" class="h-full"></div>
    <script type="module" src="/src/main.tsx"></script>
    <script>
      if (global === undefined) {
        var global = window;
      }

      // Set favicon early before React app mounts
      function setFavicon() {
        const isDarkMode = window.matchMedia("(prefers-color-scheme: dark)").matches;
        const favicon =
          document.querySelector('link[rel="icon"]') || document.createElement("link");
        favicon.rel = "icon";
        favicon.href = isDarkMode ? "/favicon-dark.png" : "/favicon-light.png";
        document.head.appendChild(favicon);
      }

      setFavicon();

      window.matchMedia("(prefers-color-scheme: dark)").addEventListener("change", setFavicon);
    </script>
    <!-- 1. Load the gtag.js script -->
  <!-- <script async src="https://www.googletagmanager.com/gtag/js?id=G-03XK6P2CKS"></script>

  <script>
    // var GA_ID = import.meta.env.VITE_GOOGLE_ANALYTICS_GTAG;
    // 2. Bootstrapping dataLayer and gtag()
    window.dataLayer = window.dataLayer || [];
    function gtag(){ dataLayer.push(arguments); }
    gtag("js", new Date());
    gtag("config", "G-03XK6P2CKS", {
      send_page_view: false  // or true‚Äîup to you
    });

    window.gtag("set", { debug_mode: true });
  </script> -->
  <script>

fetch("/assets/env.json")
  .then((res) => {
    if (!res.ok) {
      throw new Error(`Failed to load env.json: ${res.statusText}`);
    }
    return res.json();
  })
  .then((env) => {
    const gtagId = env.VITE_GOOGLE_ANALYTICS_GTAG?.replace(/"/g, ""); // remove extra quotes
    console.log("üìä Google Analytics GTAG ID:", gtagId);

    if (!gtagId) {
      console.warn("‚ö†Ô∏è GTAG ID not found in env.json");
      return;
    }

    const script = document.createElement("script");
    script.src = `https://www.googletagmanager.com/gtag/js?id=${gtagId}`;
    script.async = true;
    document.head.appendChild(script);

    window.dataLayer = window.dataLayer || [];
    function gtag() {
      window.dataLayer.push(arguments);
    }

    gtag("js", new Date());
    gtag("config", gtagId, {
      send_page_view: false,
    });

    if (location.hostname === "localhost") {
      gtag("set", { debug_mode: true });
    }

    window.gtag = gtag;
  })
  .catch((err) => {
    console.error("‚ùå Failed to initialize GA:", err);
  });

  </script>
  
  
  </body>
</html>
